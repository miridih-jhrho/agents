---
name: iterative-retrieval
description: 점진적으로 관련 파일을 검색하여 컨텍스트를 수집합니다. 서브에이전트 호출 전 컨텍스트를 준비하거나, 버그 영향 범위를 파악할 때 사용합니다. 사용자가 "찾아줘", "어디에", "관련 파일", "연관 코드" 등을 언급할 때 사용합니다.
---

# Iterative Retrieval

## When to Use

- 서브에이전트(Task) 호출 전 컨텍스트 준비 시
- "찾아줘", "어디에", "어디서" 키워드 시
- "관련 파일", "연관 코드" 요청 시
- 버그 수정 시 영향 범위 파악 필요 시
- 새 기능 구현 전 기존 패턴 파악 시
- 첫 검색 결과가 불충분할 때

## 4단계 반복 검색

```
DISPATCH (검색) → EVALUATE (평가) → REFINE (정제) → LOOP (반복)
                                                    ↓
                                              최대 3 사이클
```

## 각 단계

### DISPATCH
- Glob, Grep, SemanticSearch로 후보 파일 수집
- 넓은 범위로 시작

### EVALUATE
- 관련성 점수 부여 (0-1)
- 0.7+ 포함, 0.2- 제외

### REFINE
- 키워드/패턴 추가
- 낮은 관련성 파일 제외

### LOOP
- 종료: 0.7+ 파일 3개 이상 또는 3 사이클

## AskQuestion 필수 상황

- 검색 범위 결정 시 → 전체/특정 폴더
- 결과 불충분 시 → 다른 키워드/확장 여부
- 검색 깊이 조정 시 → 의존성 포함 여부

## 도구 조합

| 사이클 | 도구 |
|--------|------|
| 1 | SemanticSearch, Glob |
| 2 | Grep, Read |
| 3 | Read (특정 파일) |
