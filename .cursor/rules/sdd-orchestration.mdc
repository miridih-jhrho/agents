---
alwaysApply: true
---
# SDD Orchestration

Spec-Driven Development 워크플로우를 정의합니다. 기능 개발 시 명세화 → 설계 → 태스크 → 구현 → 검증 → 명세 동기화 흐름을 따릅니다.

## 워크플로우 개요

```
/specify → /plan → /task → /implement → /verify → /spec-update
                                            ↓
                                        (실패 시)
                                         /revise ↔ /verify
```

## 핵심 원칙

### Clarify 필수

작업 실행 시 **반드시** clarify 프로세스를 거칩니다. 절대 **혼자로 판단해서 작업하지 않습니다**. **혼자로 판단해야할 때 사용자에게 질문합니다**

- Ambiguity Scan (10개 카테고리)
- 모호한 부분 질문 (한 번에 1개)
- 추천 옵션 제시
- 답변 즉시 체크포인트에 기록

### 작업 리뷰

작업이 완료된 경우 변경 사항을 **사용자** 에게 읽기 쉽게 제시하고, 허가를 받아 다음 단계로 진행합니다.
사용자가 수정사항을 제시하는 경우, 수정합니다.
만약, 코드 작업인 경우 커밋합니다. 
커밋 메시지는  `.cursor/references/commit-convention.json`의 설정에 따라 커밋 메시지를 생성합니다.

**형식**: `{issue_number} {message}`

#### 이슈 번호 파싱

브랜치 이름에서 이슈 번호를 자동으로 파싱합니다.


파싱 스크립트: `.cursor/references/parse-issue-number.sh`


#### Commit 메시지 예시

| Commit Message | 설명 |
|----------------|------|
| `UNICORN-66265 JWT token 추가` | 새 기능 추가 |

### 문서 기반

임시 문서(체크포인트)로 작업하고, 완료 시 최종 문서로 통합합니다.

```
docs/.checkpoints/           # 작업 중 (임시)
├── {feature}/specify.md
├── {feature}/plan.md
└── {feature}/task.md
        ↓
docs/modules/                # 최종 명세
docs/decisions/              # 최종 ADR
```

### 단계 전환

각 단계 완료 시 다음 단계를 추천하고, 사용자 선택에 따라 자동 실행합니다.

## 명령어

| 명령어 | 역할 | 출력 |
|--------|------|------|
| `/specify` | 기능 명세화 | {feature}/specify.md |
| `/plan` | 아키텍처 설계 | {feature}/plan.md |
| `/task` | 태스크 분리 | {feature}/task.md |
| `/implement` | 코드 구현 | 코드 + 커밋 |
| `/verify` | 테스트/리뷰 | 검증 리포트 |
| `/revise` | 이슈 수정 | 수정된 코드 |
| `/spec-update` | 명세 동기화 | modules/, decisions/ |

## Ambiguity Scan 카테고리

| 카테고리 | 분석 대상 |
|----------|----------|
| Functional Scope | 핵심 목표, 성공 기준, out-of-scope |
| Domain & Data Model | 엔티티, 관계, 상태 전이 |
| Interaction & UX | 사용자 여정, 에러 상태 |
| Non-Functional | 성능, 확장성, 보안 |
| Integration | 외부 API, 실패 모드 |
| Edge Cases | 부정 시나리오, 충돌 해결 |
| Constraints | 기술 제약, 트레이드오프 |
| Terminology | 용어 정의 |
| Completion Signals | 수락 기준, DoD |
| Misc | TODO, 모호한 형용사 |

## 질문 규칙

- 세션당 **최대 10개** 질문
- 한 번에 **1개씩** 순차 출력
- **추천 옵션** 반드시 제시
- Impact × Uncertainty 우선순위

### 질문 형식

       - Format as: `**Recommended:** Option [X] - <reasoning>`
       - Then render all options as a Markdown table:

       | Option | Description |
       |--------|-------------|
       | A | <Option A description> |
       | B | <Option B description> |
       | C | <Option C description> (add D/E as needed up to 5) |
       | Short | Provide a different short answer (<=5 words) (Include only if free-form alternative is appropriate) |

## 단계별 체크포인트 참조

| 단계 | 생성 | 참조 |
|------|------|------|
| specify | docs/.checkpoints/{feature}/specify.md | - |
| plan | docs/.checkpoints/{feature}/plan.md | specify |
| task | docs/.checkpoints/{feature}/task.md | specify, plan |
| implement | 코드 | 모든 체크포인트 |
| verify | 리포트 | 모든 체크포인트 |
| revise | 수정 | 모든 체크포인트 |
| spec-update | modules/, decisions/ | 모든 체크포인트 → 삭제 |


## 에이전트

### test-agent

- **역할**: 테스트 실행, 커버리지 분석
- **호출**: 코드 작업 완료 시 
- **model**: fast
- **readonly**: true

### review-agent

- **역할**: 코드 리뷰, 보안 검토
- **호출**: 코드 작업 완료 시 
- **model**: inherit
- **readonly**: true

## 단계 전환 패턴

각 단계 완료 시:

```markdown
## {Stage} 완료

**체크포인트**: docs/.checkpoints/{feature}-{stage}.md
**상태**: Ready

---

**다음 단계**: /{next-stage}

| Option | Description |
|--------|-------------|
| A | /{next-stage} 바로 실행 |
| B | 대기 |

Reply: yes, no, or another command
```

### 전환 맵

| 현재 | 다음 (기본) | 조건부 |
|------|------------|--------|
| specify | plan | |
| plan | task | |
| task | implement | |
| implement | verify | |
| verify | spec-update | 통과 시 |
| verify | revise | 실패 시 |
| revise | verify | |
| spec-update | 완료 | |

## 트리거 키워드

다음 키워드 감지 시 해당 단계 실행:

| 단계 | 키워드 |
|------|--------|
| /specify | 명세, 기능 정의, 요구사항, 새 기능 |
| /plan | 설계, 아키텍처, 구조 |
| /task | 태스크, 작업 분리, TODO |
| /implement | 구현, 코딩, 개발 |
| /verify | 검증, 테스트, 리뷰 |
| /revise | 수정, 고치기, fix |
| /spec-update | 명세 동기화, 문서화, 정리 |

## 문서 위치

```
docs/
├── .checkpoints/           # 작업 중 체크포인트 (임시)
│   ├── {feature}/specify.md
│   ├── {feature}/plan.md
│   └── {feature}/task.md
├── modules/                # 최종 모듈 명세
│   └── {module}/README.md
└── decisions/              # 최종 ADR
    └── {num}-{title}.md
```

## 스킬 경로

이 워크플로우의 스킬들은 다음 위치에 있습니다:

```
sdd-orchestration/
├── skills/
│   ├── clarify/SKILL.md
│   ├── specify/SKILL.md
│   ├── plan/SKILL.md
│   ├── task/SKILL.md
│   ├── implement/SKILL.md
│   ├── verify/SKILL.md
│   ├── revise/SKILL.md
│   └── spec-update/SKILL.md
├── agents/
│   ├── test-agent.md
│   └── review-agent.md
└── templates/
    ├── checkpoint-*.md
    ├── module-spec.md
    └── adr.md
```